{% extends 'base.html' %}

{% block title %}Espresso Optimizer{% endblock %}

{% block content %}

<head>
    <style>
        /* Style the button */
        .custom-button {
            background-color: #02484d; /* Blue background color */
            color: white;
            padding: 10px 20px;
            /* margin: 8px 0; */
            border: none;
            border-radius: 4px;
            cursor: pointer;
                    }

        /* Hover effect */
        .custom-button:hover {
            background-color: #03282b; /* Darker blue on hover */
            color:gray;
        }

        /* Default style for larger screens */
        table.espresso-info {
            width: 40%; /* Set table width to 40% of the parent element */
            margin-left: auto; /* Center the table horizontally */
            margin-right: auto;
            border-collapse: collapse; /* Remove gaps between cells */
        }

        /* Style for smaller screens (e.g., mobile devices) */
        @media (max-width: 768px) {
            table.espresso-info {
                width: 100%; /* Set table width to 100% for smaller screens */
            }
        }

        table.espresso-info, th, td {
            border: 1px solid black; /* Add border to table, th, and td */
            padding: 8px; /* Add padding inside cells */
            text-align: center; /* Center text in th and td */
        }

        th {
            background-color: #f2f2f2; /* Light grey background for header */
        }


        .flex-container {
            display: flex; /* Enables Flexbox */
            justify-content: center; /* Centers items horizontally */
            align-items: center; /* Centers items vertically */
            height: 50px; /* Adjust height as needed for better alignment */
        }

        .flex-container p {
            margin: 0 10px 0 0; /* Right margin and remove default top and bottom margins */
        }

</style>
</head>

<body>
    <center>
    <h1 style="text-align: center">Espresso Optimizer</h1>
    <br>
    <a href="https://docs.google.com/forms/d/e/1FAIpQLScPZQN5Kb4q6an_afiar9N6jHNMejM567JL8DLGtIk1sKK74A/viewform" target="_blank">
        <button class="custom-button">Enter Brew Data</button>
    </a>
    <br>
    <br>
    <br>
    <form name="form1" action="#" method="post">
        <h1 style="text-align: center">Naive Brewing Recommendations</h1>
        <p>Based on broad research for the ideal starting point, before accounting for individual tastes</p>
        <div class="flex-container">
            <p class="pad_lr_30">Roast</p>
            <select name="roast">
                <option value="{{roast_val}}">{{roast_val}}</option>
                <option disabled>______</option>
                <option value="Light">Light</option>
                <option value="Medium">Medium</option>
                <option value="Dark">Dark</option>
            </select>
        </div>
        <br>
        <div class="flex-container">
            <p class="pad_lr_30">Dose</p>
            <select name="dose">
                <option value="{{dose_val}}">{{dose_val}}</option>
                <option disabled>______</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
            </select>
        </div>
        <br>
        <input type="submit" value="Calculate">
        <br>
        <br>
        <table class="espresso-info">
            <tr>
                <th>Category</th>
                <th>Value</th>
            </tr>
            <tr>
                <td>Style</td>
                <td>{{ naive_espresso_info['style'] }}</td>
            </tr>
            <tr>
                <td>Coffee Grams In</td>
                <td>{{ naive_espresso_info['coffee_grams_in'] }}</td>
            </tr>
            <tr>
                <td>Water Temp F</td>
                <td>{{ naive_espresso_info['water_temp_f'] }}</td>
            </tr>
            <tr>
                <td>Brew Profile Part 1</td>
                <td>{{ naive_espresso_info['brew_profile']['part1'] }}</td>
            </tr>
            <tr>
                <td>Brew Profile Part 2</td>
                <td>{{ naive_espresso_info['brew_profile']['part2'] }}</td>
            </tr>
            <tr>
                <td>Brew Profile Part 3</td>
                <td>{{ naive_espresso_info['brew_profile']['part3'] }}</td>
            </tr>
            <tr>
                <td>Brew Profile Part 4</td>
                <td>{{ naive_espresso_info['brew_profile']['part4'] }}</td>
            </tr>
            <tr>
                <td>Brew Profile Part 5</td>
                <td>{{ naive_espresso_info['brew_profile']['part5'] }}</td>
            </tr>
            <tr>
                <td>Total Brew Seconds</td>
                <td>{{ naive_espresso_info['brew_profile']['total_seconds'] }}</td>
            </tr>
            <tr>
                <td>Niche Grind Setting</td>
                <td>{{ naive_espresso_info['niche_grind_setting'] }}</td>
            </tr>
            <tr>
                <td>Coffee to Espresso Ratio</td>
                <td>{{ naive_espresso_info['coffee_to_espresso_ratio'] }}</td>
            </tr>
            <tr>
                <td>Espresso Grams Out</td>
                <td>{{ naive_espresso_info['espresso_grams_out'] }}</td>
            </tr>
        </table>
    </form>
    <br>
    <br>
    <br>
    <form name="form2" action="#" method="post">
        <h1 style="text-align: center">KNN Predictive Recommendations</h1>
        <p>Currently using dummy data while I'm gathering real data</p>
        <p>KNN, Neighbors = 3, based on specific users and roasts</p>
        <div class="flex-container">
            <p class="pad_lr_30">User</p>
            <select name="user_pred">
                <option value="{{user_pred_val}}">{{user_pred_val}}</option>
                <option disabled>______</option>
                <option value="James">James</option>
                <option value="Justine">Justine</option>
            </select>
        </div>
        <br>
        <div class="flex-container">
            <p class="pad_lr_30">Roast</p>
            <select name="roast_pred">
                <option value="{{roast_pred_val}}">{{roast_pred_val}}</option>
                <option disabled>______</option>
                <option value="Light">Light</option>
                <option value="Medium">Medium</option>
                <option value="Dark">Dark</option>
            </select>
        </div>
        <br>
        <input type="submit" value="Calculate">
        <br>
        <br>
        <table class="espresso-info">
            <tr>
                <th>Category</th>
                <th>Value</th>
            </tr>
            <tr>
                <td>Niche Grind Setting</td>
                <td>{{ optimal_parameters_dict['niche_grind_setting'] }}</td>
            </tr>
            <tr>
                <td>Coffee to Espresso Ratio</td>
                <td>{{ optimal_parameters_dict['espresso_coffee_ratio'] }}</td>
            </tr>
            <tr>
                <td>Extraction Time in Seconds</td>
                <td>{{ optimal_parameters_dict['extraction_time_seconds'] }}</td>
            </tr>
            <tr>
                <td>Flow Time in Seconds</td>
                <td>{{ optimal_parameters_dict['flow_time_seconds'] }}</td>
            </tr>
            <tr>
                <td>Extraction to Flow Ratio</td>
                <td>{{ optimal_parameters_dict['extract_flow_ratio'] }}</td>
            </tr>
            <tr>
                <td>Water Temp F</td>
                <td>{{ optimal_parameters_dict['water_temp_f'] }}</td>
            </tr>
        </table>
        <!-- <p>TODO: provide an alternate fail message when not enough data are available</p>
        <p>TODO: allow all users' data to join together</p>
        <p>TODO: provide model performance such as rmse, r2, etc</p> -->
    </form>
    <br>
    <br>
    <br>
</center>
</body>

{% endblock %}
